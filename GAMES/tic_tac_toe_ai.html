<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Standalone Tic Tac Toe</title>
<style>
  body{margin:0; display:flex; justify-content:center; align-items:center; height:100vh; background:#0b1220; color:#e6eef8; font-family:Arial, sans-serif;}
  #game{display:grid; grid-template: repeat(3, 100px) / repeat(3, 100px); gap:5px;}
  .cell{background:#04121a; display:flex; justify-content:center; align-items:center; font-size:48px; cursor:pointer; border-radius:8px; transition:0.1s;}
  .cell:hover{background:#09203a;}
  #status{position:absolute; top:10px; font-size:18px; width:100%; text-align:center;}
  button{position:absolute; bottom:10px; left:50%; transform:translateX(-50%); padding:8px 12px; border:none; border-radius:6px; background:#6ad1ff; color:#042033; font-weight:600; cursor:pointer;}
</style>
</head>
<body>
<div id="status">Your turn</div>
<div id="game"></div>
<button id="resetBtn">Reset</button>
<script>
const gameEl = document.getElementById('game');
const statusEl = document.getElementById('status');
let board = Array(9).fill('');
let player = 'X';

function renderBoard(){
  gameEl.innerHTML='';
  board.forEach((cell,i)=>{
    const div=document.createElement('div');
    div.className='cell';
    div.textContent=cell;
    div.addEventListener('click',()=>playerMove(i));
    gameEl.appendChild(div);
  });
}

function playerMove(index){
  if(board[index] || checkWinner(board)) return;
  board[index]=player;
  if(checkWinner(board)) {statusEl.textContent='You win!'; renderBoard(); return;}
  if(board.every(c=>c)) {statusEl.textContent='Draw!'; renderBoard(); return;}
  aiMove();
}

function aiMove(){
  // Minimax algorithm for perfect AI
  const bestMove = minimax(board,'O').index;
  board[bestMove]='O';
  if(checkWinner(board)) {statusEl.textContent='AI wins!'; renderBoard(); return;}
  if(board.every(c=>c)) {statusEl.textContent='Draw!'; renderBoard(); return;}
  renderBoard();
}

function checkWinner(b){
  const combos=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  for(const [a,b1,c] of combos){
    if(b[a] && b[a]===b[b1] && b[a]===b[c]) return b[a];
  }
  return null;
}

function minimax(newBoard, currentPlayer){
  const availSpots = newBoard.map((v,i)=>v===''?i:null).filter(v=>v!==null);
  const winner = checkWinner(newBoard);
  if(winner==='X') return {score:-10};
  if(winner==='O') return {score:10};
  if(availSpots.length===0) return {score:0};
  
  const moves = [];
  for(const i of availSpots){
    const move = {index:i};
    newBoard[i]=currentPlayer;
    const result = minimax(newBoard, currentPlayer==='O'?'X':'O');
    move.score=result.score;
    newBoard[i]='';
    moves.push(move);
  }
  let bestMove;
  if(currentPlayer==='O'){
    let bestScore=-Infinity;
    for(const m of moves){if(m.score>bestScore){bestScore=m.score; bestMove=m;}}
  } else {
    let bestScore=Infinity;
    for(const m of moves){if(m.score<bestScore){bestScore=m.score; bestMove=m;}}
  }
  return bestMove;
}

renderBoard();
document.getElementById('resetBtn').addEventListener('click',()=>{board=Array(9).fill(''); statusEl.textContent='Your turn'; renderBoard();});
</script>
</body>
</html>
