<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Adjustable Snake — Arya</title>
  <style>
    :root{--bg:#0b1220;--board:#071126;--tile:#66ff99;--food:#ff6666;--ui:#cfe8ff}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;overflow-x:hidden}
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#071126 0%, #0b1220 100%);color:var(--ui);padding:10px}
    .wrap{width:min(760px,95vw);background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:12px;padding:18px;box-shadow:0 8px 30px rgba(2,6,23,0.6);max-height:95vh;overflow:auto}
    header{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:12px}
    h1{font-size:18px;margin:0;flex:1 1 auto}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    button{background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--ui);padding:8px 10px;border-radius:8px;cursor:pointer}
    button:hover{transform:translateY(-1px)}
    .board-wrap{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap;justify-content:center}
    canvas{background:var(--board);border-radius:8px;display:block;max-width:600px;width:100%;height:auto}
    .hud{min-width:160px;padding:10px}
    .stat{background:rgba(255,255,255,0.02);border-radius:8px;padding:8px;margin-bottom:8px;word-wrap:break-word}
    .big{font-size:22px;font-weight:700}
    .small{font-size:12px;opacity:0.8}
    .footer{font-size:12px;opacity:0.8;margin-top:8px}
    .touch-controls{display:none;margin-top:8px;gap:8px}
    .tc-btn{padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);min-width:46px;text-align:center}
    input[type=range]{width:100px}
    label{font-size:12px;opacity:0.8}
    @media (max-width:640px){
      .hud{width:100%}
      .touch-controls{display:flex;justify-content:center}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Snake — adjustable version</h1>
      <div class="controls">
        <button id="pauseBtn">Pause</button>
        <button id="restartBtn">Restart</button>
      </div>
    </header>

    <div class="board-wrap">
      <canvas id="c" width="600" height="600"></canvas>

      <aside class="hud">
        <div class="stat"><div class="small">Score</div><div id="score" class="big">0</div></div>
        <div class="stat"><div class="small">High Score</div><div id="high" class="big">0</div></div>
        <div class="stat small" id="status">Status: <strong>Running</strong></div>
        <div class="stat">
          <label>Speed: <span id="speedVal">8</span></label><br>
          <input type="range" min="5" max="20" value="8" id="speedRange">
        </div>
        <div class="stat">
          <label>Grid size: <span id="gridVal">20</span></label><br>
          <input type="range" min="10" max="40" value="20" id="gridRange">
        </div>
        <div class="stat small">Controls: Arrow keys / WASD — P to pause — R to restart</div>
        <div class="touch-controls" id="touch">
          <div style="display:flex;gap:8px;justify-content:center">
            <div class="tc-btn" data-dir="up">▲</div>
          </div>
          <div style="display:flex;gap:8px;justify-content:center;margin-top:8px">
            <div class="tc-btn" data-dir="left">◀</div>
            <div class="tc-btn" data-dir="down">▼</div>
            <div class="tc-btn" data-dir="right">▶</div>
          </div>
        </div>
        <div class="footer">Made for you — open this file in a browser to play.</div>
      </aside>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    const highKey = 'snake_high_arya_v2';
    let tileCount = 20;
    let size = 600;
    let tile = size / tileCount;
    let speed = 8;
    let snake, dir, nextDir, food, score, high, running, lastFrame, accumulator;

    function init(){
      snake = [{x:9,y:9}];
      dir = {x:0,y:0};
      nextDir = {x:0,y:0};
      food = spawnFood();
      score = 0;
      high = Number(localStorage.getItem(highKey) || 0);
      document.getElementById('high').innerText = high;
      running = true;
      lastFrame = 0;
      accumulator = 0;
      document.getElementById('score').innerText = 0;
      document.getElementById('status').innerHTML = 'Status: <strong>Running</strong>';
    }

    function spawnFood(){
      const occupied = new Set(snake.map(s=>s.x+','+s.y));
      let x,y;
      do{ x = Math.floor(Math.random()*tileCount); y = Math.floor(Math.random()*tileCount); } while(occupied.has(x+','+y));
      return {x,y};
    }

    function draw(){
      ctx.fillStyle = '#071126';
      ctx.fillRect(0,0,size,size);

      ctx.strokeStyle = 'rgba(255,255,255,0.02)';
      for(let i=0;i<=tileCount;i++){
        ctx.beginPath(); ctx.moveTo(i*tile,0); ctx.lineTo(i*tile,size); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,i*tile); ctx.lineTo(size,i*tile); ctx.stroke();
      }

      ctx.fillStyle = '#ff6666';
      ctx.fillRect(food.x*tile+tile*0.1, food.y*tile+tile*0.1, tile*0.8, tile*0.8);

      for(let i=0;i<snake.length;i++){
        const s = snake[i];
        ctx.fillStyle = i===0 ? '#66ffcc' : '#66ff99';
        ctx.fillRect(s.x*tile+2, s.y*tile+2, tile-4, tile-4);
      }
    }

    function update(){
      if(!running) return;
      if((nextDir.x!==-dir.x || nextDir.y!==-dir.y) || (dir.x===0 && dir.y===0)) dir={...nextDir};
      if(dir.x===0 && dir.y===0) return;

      const head={x:(snake[0].x+dir.x+tileCount)%tileCount,y:(snake[0].y+dir.y+tileCount)%tileCount};
      for(let seg of snake){ if(seg.x===head.x && seg.y===head.y){ gameOver(); return; }}
      snake.unshift(head);
      if(head.x===food.x && head.y===food.y){ score++; document.getElementById('score').innerText=score; food=spawnFood(); if(score>high){ high=score; localStorage.setItem(highKey,high); document.getElementById('high').innerText=high; } }
      else snake.pop();
    }

    function gameOver(){ running=false; document.getElementById('status').innerHTML='Status: <strong>Game Over</strong>'; }
    function restart(){ init(); }

    function loop(ts){
      if(!lastFrame) lastFrame=ts;
      const delta=ts-lastFrame; lastFrame=ts; accumulator+=delta;
      const step=1000/speed;
      while(accumulator>=step){ update(); accumulator-=step; }
      draw(); requestAnimationFrame(loop);
    }

    document.getElementById('pauseBtn').addEventListener('click',()=>{ running=!running; document.getElementById('status').innerHTML='Status: <strong>'+(running?'Running':'Paused')+'</strong>'; });
    document.getElementById('restartBtn').addEventListener('click',()=>{ restart(); });

    window.addEventListener('keydown',e=>{
      const k=e.key;
      if(k==='ArrowUp'||k==='w')nextDir={x:0,y:-1};
      if(k==='ArrowDown'||k==='s')nextDir={x:0,y:1};
      if(k==='ArrowLeft'||k==='a')nextDir={x:-1,y:0};
      if(k==='ArrowRight'||k==='d')nextDir={x:1,y:0};
      if(k==='p')running=!running;
      if(k==='r')restart();
    });

    document.getElementById('speedRange').addEventListener('input',e=>{speed=Number(e.target.value);document.getElementById('speedVal').innerText=speed;});
    document.getElementById('gridRange').addEventListener('input',e=>{tileCount=Number(e.target.value);document.getElementById('gridVal').innerText=tileCount;tile=size/tileCount;restart();});

    init();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
